# Продолжаем Movie DB

## Переделать запросы на AXIOS

[axios](https://github.com/axios/axios)

[defaults](https://github.com/axios/axios#config-defaults)

- baseURL
- params для GET и POST запросов
- response.data — тут хранится ответ сервера

## API

[API обзор](https://www.themoviedb.org/documentation/api)

[API документация](https://developers.themoviedb.org/3)
[Discover](https://developers.themoviedb.org/3/discover/movie-discover)

### Страница жанра фильма

[параметр `with_genres`](https://developers.themoviedb.org/3/discover/movie-discover)

### Страница всех жанров

[get-movie-list](https://developers.themoviedb.org/3/genres/get-movie-list)

Локализацию списка можно получить передав параметр языка `language`

### Показ жанра на странице фильма

В объекте фильма приходит свойство `genre_ids` где хранятся номера жанров
Узнать названия жанров можно таким запросом `/genre/movie/list`

## Переход между страницами фильмов

Когда пользователь находится на странице фильма, он совершает набор в форме поиска и выбирает из предложеных подсказок фильм, совершается переход на другой фильм, но мы находимся на том же компоненте.

Первое решение было использование `watcher` для `$route`

Второе решение с использованием router guards с предварительной загрузкой новых данных до перехода.

## Полировка формы поиска

- Добавить обработчики клавиш курсора `left` `right`, чтобы убирался выбор подсказки.
- Добавить `debounce` при наборе для экономии запросов. Библиотека `lodash-es`

## Страница результатов поиска

Если в форме поиска мы не выбрали из подсказок и нажали перейти, то мы попадаем на страницу результатов поиска

Для пагинации возьмем `vue-pagination-2`

## Именованные маршруты

[Документация](https://router.vuejs.org/ru/guide/essentials/named-routes.html)

```javascript
<router-link to="{ name: 'movieVideos', params: {id: $route.params.id} }" />
```

```javascript
// Routes
const routes = [
  {
    path: "/movie",
    component: MoviePage,
    children: [
      { path: ":id", component: MovieDescription },
      { path: ":id/videos", component: MovieVideos }
    ]
  }
];
```

`MoviePage` должен иметь `<router-view />`

`movieVideos`

## Добавить подсветку текущей страницы в меню навигации

[active-class](https://router.vuejs.org/ru/api/#active-class)

Входной параметр [`exact`](https://router.vuejs.org/ru/api/#exact) для `router-link`

### Показать трейлеры к фильму

[API](https://developers.themoviedb.org/3/movies/get-movie-videos)

Сделать вложенный маршрут для страницы фильма где во вкладках будет отображаться описание, а на другой вкладке трейлер фильма.

[Вложенные маршруты](https://router.vuejs.org/ru/guide/essentials/nested-routes.html)

### Рейтинг

[Компонент](https://github.com/craigh411/vue-star-rating/)

Рейтинг фильма приходит в свойстве `vote_average`

Для голосования нужно передавать сессию пользователя, или гостевую сессию.

[Создание гостевой сессии](https://developers.themoviedb.org/3/authentication/create-guest-session)

Хранить сессию в SessionStorage или LocalStorage

## Что еще можно сделать для сайта фильмов

- Интернационализация. Когда переключая языки мы не только получаем данные из бекенда, а и переключаются языки в шаблоне сайта
- Ленивая загрузка изображений, когда мы быстро получаем картинку маленького размера, а потом, подгружаем на ее место уже нормального размера изображение
- Меню жанров фильмов для сайта. Это не сложная задача. попробуйте сделать самостоятельно. Создайте компонент для такого меню, он должен делать запрос за данными на бекенд и рендерить эти данные в виде меню навигации.

## Provide/Inject

[provide/inject](https://ru.vuejs.org/v2/api/index.html#provide-inject) — "секретный" канал, который позволяет передавать любые данные от родителя к потомкам, без необходимости явно передавать их через входные параметры.

Данные котоыре передаются через provide/inject не имеют реактивности!

Если мы изменим кусок данных, которые передаются в provide, они не получат изменений в inject компонентов-потмков.

Но мы можем получить реактивность если в provide будем передавать объект (а не простое значение), так как свойства объектов имеют свойства реактивности и все ссылки на этот объект увидят изменения.

provide/inject это глобальные свойства для всей части дерева компонентов где они используются. По этому не очень хорошо использовать обобщенные названия, так как можно получить коллизии с другими компонентами которые могут использовать такие же имена. По этому лучше использовать префиксы для именования таких свойств.
